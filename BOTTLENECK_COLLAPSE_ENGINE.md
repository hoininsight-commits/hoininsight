# BOTTLENECK COLLAPSE ENGINE (Step 3.2)

**Role:** Filters the value chain to ensure "All Roads Lead to Rome" (1~3 winners).
**Input:** Compressed Value Chain (from Module 2).
**Output:** 1~3 Specific Bottleneck Entities (or REJECT).

---

## 1. Module 3: BOTTLENECK_RESOLUTION

### Objective
Prove that the Forced Capital Flow cannot bypass these specific entities.

### The "Inevitable" Criteria (Must satisfy at least 2)
To be a valid bottleneck, an entity must hold **at least 2** of the following cards:

1.  **Lead-Time Constraint (Time Moat)**: "If you order today, you get it in 2 years." (e.g., HD Hyundai Heavy, HBM).
2.  **Capacity Constraint (Physical Moat)**: "Sold out for the next 12 months."
3.  **Certification/Regulation Gate**: "Only 2 companies have the license/approval to sell this." (e.g., FDA-approved specific drug, Mil-spec vendor).
4.  **Standard Lock-in**: "The entire industry infrastructure is built on this standard." (e.g., CUDA, x86, Windows).
5.  **Patent/IP Moat**: "Legally impossible to copy."
6.  **Installed Base Switching Cost**: "Replacing this costs more than buying it."
7.  **"Stop-the-Line" Necessity**: "Without this $1 part, the $1M machine stops."

---

## 2. Collapse Rules (Hard Constraints)

### Rule A: The "Numbers Game"
*   **0 Entities**: Theme is valid, but no actionable target. **REJECT**.
*   **1 Entity (Monopoly)**: Ideal. **LOCK**.
*   **2 Entities (Duopoly)**: Excellent. **LOCK**.
*   **3 Entities (Oligopoly)**: Acceptable. **LOCK**.
*   **4+ Entities (Fragmented)**: No collapse. Competition will erode margins. **REJECT**.

### Rule B: The "ETF Test"
If the conclusion is "Buy the whole sector" (e.g., "Buy any solar stock"), it is **REJECTED**. The engine must identify specific names or a specific sub-segment that is a bottleneck (e.g., "Buy the only inverter maker compatible with the new grid code").

### Rule C: No "Winner Takes All" Gambling
If the bottleneck *will be* 1 company, but we don't know *which one yet* (e.g., Phase 2 drug trials with 5 competitors), **REJECT**. We hunt current bottlenecks, not future bets.

---

## 3. Output State
*   **PASS**: 1~3 Entities identified + 2 Criteria met.
*   **FAIL**: Anything else.
