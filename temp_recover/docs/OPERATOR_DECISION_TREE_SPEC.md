# OPERATOR_DECISION_TREE_SPEC.md

본 문서는 파이프라인의 판단 과정을 운영자가 직관적으로 이해할 수 있도록 시각화하는 `IS-72 Operator Decision Tree`의 규격을 정의합니다.

## 1. 트리 구조 (Node Hierarchy)

의사결정 트리는 아래 순서의 노드로 구성되며, 모든 라벨은 한글로 고정됩니다.

1.  **데이터 수집 (Data Ingest)**: 전체 후보군 수
2.  **팩트 체크 (Hard Fact)**: 공식 문서/공시 존재 여부
3.  **시점 분석 (Why-Now)**: 현재 발화해야 할 이유 존재 여부
4.  **주인공 매칭 (Actor Match)**: 매크로/섹터 주체 연결 여부
5.  **품질 하한선 (Quality Floor)**: 스크립트 생성 가능 여부
6.  **최종 결정 (Final Status)**: 확정 / 보류 / 침묵

## 2. Runner-up Loss (2순위 탈락 사유) 로직

- **목표**: 1순위와 경쟁했으나 탈락한 2순위 후보가 '어느 단계에서 처음 실패했는지'를 추적합니다.
- **로직**:
    - 모든 후보에 대해 1~5단계 검증 수행.
    - 실패한 첫 번째 단계의 이름을 `first_fail_node`로 기록.
    - 대시보드에서 2순위 후보 옆에 "⚠️ {단계명} 단계 부적합" 라벨 표시.

## 3. 언어 규칙 (No English Tokens)

대시보드 렌더링 시 아래의 영어 토큰은 절대 노출되지 않아야 합니다.

| 영어 토큰 | 변환 한글 라벨 |
| :--- | :--- |
| TRUST_LOCKED | **확정 (Confirmed)** |
| EDITORIAL_CANDIDATE | **후보 (Candidate)** |
| HOLD | **보류 (Hold)** |
| SILENT | **침묵 (Silent)** |
| ACTIVE | **활성 (Active)** |
| REJECT | **반려 (Rejected)** |

## 4. 시각화 요구사항

- **위치**: 대시보드 상단 카드 하단 또는 전용 섹션.
- **스타일**:
    - 통과 노드: ✅ (녹색)
    - 실패 노드: ❌ (적색)
    - 대기/해당없음: ⚪ (회색)
